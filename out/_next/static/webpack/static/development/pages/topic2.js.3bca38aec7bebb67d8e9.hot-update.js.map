{"version":3,"file":"static/webpack/static/development/pages/topic2.js.3bca38aec7bebb67d8e9.hot-update.js","sources":["webpack:///./parts/Review.js"],"sourcesContent":["import Link from 'next/link'\nimport * as _ from 'lodash'\nimport {\n  scaleRed,\n  scaleBlue,\n  scaleTextBlue,\n  scaleTextRed,\n  colorExtend,\n  class_labels,\n} from '../parts/Static'\n\nclass Review extends React.Component {\n  render() {\n    let {\n      r,\n      i,\n      grem,\n      analyze,\n      show_accuracy,\n      is_review,\n      threshold = 0.5,\n      hide_author = false,\n      classification_label = '',\n    } = this.props\n\n    let winner_index, scaleWinner, scaleLoser\n    let winner_name = r.class\n    if (r.class_probabilities[1] > r.class_probabilities[0]) {\n      winner_index = 1\n      scaleWinner = scaleBlue\n      scaleLoser = scaleRed\n    } else {\n      winner_index = 0\n      scaleWinner = scaleRed\n      scaleLoser = scaleBlue\n    }\n\n    let max = Math.max(\n      Math.abs(_.min(r.lime_scores)),\n      Math.abs(_.max(r.lime_scores))\n    )\n\n    function scaleScore(value) {\n      if (value < 0) {\n        return scaleTextRed(Math.abs(value) / max)\n      } else {\n        return scaleTextBlue(Math.abs(value) / max)\n      }\n    }\n\n    return (\n      <div\n        style={{\n          marginBottom: grem,\n        }}\n      >\n        {analyze ? (\n          <div style={{ marginTop: grem * 0, marginBottom: grem * 0 }}>\n            <div\n              style={{\n                background: scaleWinner(r.class_probabilities[winner_index]),\n              }}\n            >\n              <span>\n                {classification_label}classification:{' '}\n                {class_labels[winner_index]}\n              </span>{' '}\n              &middot;{' '}\n              <span style={{}}>\n                {Math.floor(r.class_probabilities[winner_index] * 1000) / 10}%\n                certainty\n              </span>\n            </div>\n            {show_accuracy ? (\n              <div\n                style={{\n                  background: r.label === 'pos' ? scaleBlue(1) : scaleRed(1),\n                }}\n              >\n                label: {r.label === 'pos' ? 'positive' : 'negative'} &middot;{' '}\n                {r.label === r.class ? 'accurate' : 'inaccurate'} classification\n              </div>\n            ) : null}\n          </div>\n        ) : null}\n        {!hide_author ? (\n          <div style={{ textIndent: grem * 0 }}>\n            by {r.author} &middot;{' '}\n            {is_review ? (\n              <span>{r.date} days ago</span>\n            ) : (\n              <Link href={`/review?id=${r.index}`}>\n                <a>{r.date} days ago</a>\n              </Link>\n            )}\n          </div>\n        ) : null}\n\n        <div style={{ marginBottom: grem * 0 }}>\n          <div>\n            <div>\n              <div style={{ textIndent: grem * 1 }}>\n                {r.lime_tokens.map((t, i) => {\n                  let score = r.lime_scores[i]\n                  let background = analyze\n                    ? Math.abs(score) / max > threshold\n                      ? scaleScore(score)\n                      : 0\n                    : 'transparent'\n                  return (\n                    <span>\n                      {' '}\n                      <span\n                        style={{\n                          backgroundImage: `linear-gradient(${background}, ${background})`,\n                          backgroundSize: '4px 5px',\n                          backgroundRepeat: 'repeat-x',\n                          backgroundPosition: `0 0.85em`,\n                          paddingBottom: 2,\n                        }}\n                      >\n                        {t}\n                      </span>{' '}\n                    </span>\n                  )\n                })}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Review\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAQA;;;;;;;;;;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AADA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AADA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AADA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAKA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AALA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA;AAOA;;;;AAzHA;AACA;AA2HA;;;;A","sourceRoot":""}